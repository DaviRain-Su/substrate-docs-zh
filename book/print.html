<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Substra官方文档中文版</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="quick_start/index.html"><strong aria-hidden="true">1.</strong> 🔜快速开始</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="quick_start/substrate_at_a_glance.html"><strong aria-hidden="true">1.1.</strong> Substrate一览</a></li><li class="chapter-item expanded "><a href="quick_start/start_a_node.html"><strong aria-hidden="true">1.2.</strong> 启动一个节点</a></li><li class="chapter-item expanded "><a href="quick_start/explor_the_code.html"><strong aria-hidden="true">1.3.</strong> 探索代码</a></li><li class="chapter-item expanded "><a href="quick_start/modify_the_runtime.html"><strong aria-hidden="true">1.4.</strong> 修改运行时</a></li></ol></li><li class="chapter-item expanded "><a href="learn/index.html"><strong aria-hidden="true">2.</strong> 📑学习</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="learn/welcome_to_substrate.html"><strong aria-hidden="true">2.1.</strong> 欢迎来到substrate</a></li><li class="chapter-item expanded "><a href="learn/blockchain_basics.html"><strong aria-hidden="true">2.2.</strong> 区块链基础知识</a></li><li class="chapter-item expanded "><a href="learn/arhitecture_and_rust.html"><strong aria-hidden="true">2.3.</strong> 架构和Rust库</a></li><li class="chapter-item expanded "><a href="learn/networks_and_nodes.html"><strong aria-hidden="true">2.4.</strong> 网络和节点</a></li><li class="chapter-item expanded "><a href="learn/what_can_you_build.html"><strong aria-hidden="true">2.5.</strong> 你能建造什么</a></li><li class="chapter-item expanded "><a href="learn/runtime_development.html"><strong aria-hidden="true">2.6.</strong> 运行时开发</a></li><li class="chapter-item expanded "><a href="learn/transactions_and_block.html"><strong aria-hidden="true">2.7.</strong> 交易和区块链基础知识</a></li><li class="chapter-item expanded "><a href="learn/transaction_lifecycle.html"><strong aria-hidden="true">2.8.</strong> 交易生命周期</a></li><li class="chapter-item expanded "><a href="learn/state_transitions_and_storage.html"><strong aria-hidden="true">2.9.</strong> 状态转换和存储</a></li><li class="chapter-item expanded "><a href="learn/accounts_addresses_and_keys.html"><strong aria-hidden="true">2.10.</strong> 账户、地址和密钥</a></li><li class="chapter-item expanded "><a href="learn/rust_for_substrate.html"><strong aria-hidden="true">2.11.</strong> Rust for Substrate</a></li><li class="chapter-item expanded "><a href="learn/offchain_operations.html"><strong aria-hidden="true">2.12.</strong> 链下操作</a></li><li class="chapter-item expanded "><a href="learn/light_clients_in_substate.html"><strong aria-hidden="true">2.13.</strong> Substrate Connect中的轻客户端</a></li><li class="chapter-item expanded "><a href="learn/substrate_connect.html"><strong aria-hidden="true">2.14.</strong> 密码学</a></li><li class="chapter-item expanded "><a href="learn/cryptography_consensus.html"><strong aria-hidden="true">2.15.</strong> 共识</a></li><li class="chapter-item expanded "><a href="learn/cross_consensus_messaging.html"><strong aria-hidden="true">2.16.</strong> 跨共识消息传递</a></li></ol></li><li class="chapter-item expanded "><a href="install/index.html"><strong aria-hidden="true">3.</strong> 🤔️安装</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="install/rust_toolchain.html"><strong aria-hidden="true">3.1.</strong> Rust工具链</a></li><li class="chapter-item expanded "><a href="install/linux.html"><strong aria-hidden="true">3.2.</strong> Linux</a></li><li class="chapter-item expanded "><a href="install/macos.html"><strong aria-hidden="true">3.3.</strong> MacOS</a></li><li class="chapter-item expanded "><a href="install/windows.html"><strong aria-hidden="true">3.4.</strong> Windows</a></li><li class="chapter-item expanded "><a href="install/developer_tools.html"><strong aria-hidden="true">3.5.</strong> 开发者工具</a></li><li class="chapter-item expanded "><a href="install/troubleshoot_rust_issues.html"><strong aria-hidden="true">3.6.</strong> 排查Rust问题</a></li></ol></li><li class="chapter-item expanded "><a href="build/index.html"><strong aria-hidden="true">4.</strong> 😄建造</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="build/smart_contracts.html"><strong aria-hidden="true">4.1.</strong> 智能合约</a></li><li class="chapter-item expanded "><a href="build/custom_pallets.html"><strong aria-hidden="true">4.2.</strong> 定制Pallet</a></li><li class="chapter-item expanded "><a href="build/runtime_storage.html"><strong aria-hidden="true">4.3.</strong> 运行时存储</a></li><li class="chapter-item expanded "><a href="build/transactions_weights_and_fee.html"><strong aria-hidden="true">4.4.</strong> 交易权重和费用</a></li><li class="chapter-item expanded "><a href="build/pallet_coupling.html"><strong aria-hidden="true">4.5.</strong> Pallet coupling</a></li><li class="chapter-item expanded "><a href="build/events_and_errors.html"><strong aria-hidden="true">4.6.</strong> 事件和错误</a></li><li class="chapter-item expanded "><a href="build/randomness.html"><strong aria-hidden="true">4.7.</strong> 随机性</a></li><li class="chapter-item expanded "><a href="build/privileged_calls_and_origins.html"><strong aria-hidden="true">4.8.</strong> 特权调用和Origin</a></li><li class="chapter-item expanded "><a href="build/remote_procedure_calls.html"><strong aria-hidden="true">4.9.</strong> 远程过程调用</a></li><li class="chapter-item expanded "><a href="build/application_development.html"><strong aria-hidden="true">4.10.</strong> 应用开发</a></li><li class="chapter-item expanded "><a href="build/chain_specification.html"><strong aria-hidden="true">4.11.</strong> 链条规格</a></li><li class="chapter-item expanded "><a href="build/genesis_configuration.html"><strong aria-hidden="true">4.12.</strong> 创世纪配置</a></li><li class="chapter-item expanded "><a href="build/build_process.html"><strong aria-hidden="true">4.13.</strong> 构建过程</a></li><li class="chapter-item expanded "><a href="build/build_a_deterministic_runtime.html"><strong aria-hidden="true">4.14.</strong> 构建确定性运行时</a></li><li class="chapter-item expanded "><a href="build/troubleshoot_your_code.html"><strong aria-hidden="true">4.15.</strong> 对您的代码进行故障排除</a></li></ol></li><li class="chapter-item expanded "><a href="test/index.html"><strong aria-hidden="true">5.</strong> ❌测试</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="test/unit_test.html"><strong aria-hidden="true">5.1.</strong> 单元测试</a></li><li class="chapter-item expanded "><a href="test/debug.html"><strong aria-hidden="true">5.2.</strong> 调试</a></li><li class="chapter-item expanded "><a href="test/benchmark.html"><strong aria-hidden="true">5.3.</strong> 基准</a></li><li class="chapter-item expanded "><a href="test/simulate_parachains.html"><strong aria-hidden="true">5.4.</strong> 在测试网络中模拟平行链</a></li><li class="chapter-item expanded "><a href="test/check_runtime.html"><strong aria-hidden="true">5.5.</strong> 检查运行时间</a></li></ol></li><li class="chapter-item expanded "><a href="deploy/index.html"><strong aria-hidden="true">6.</strong> 🪤部署</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="deploy/prepare_to_deploy.html"><strong aria-hidden="true">6.1.</strong> 准备部署</a></li><li class="chapter-item expanded "><a href="deploy/deployment_options.html"><strong aria-hidden="true">6.2.</strong> 部署选项和工具</a></li><li class="chapter-item expanded "><a href="deploy/keys_and_network_operations.html"><strong aria-hidden="true">6.3.</strong> 密钥签名和网络操作</a></li></ol></li><li class="chapter-item expanded "><a href="maintain/index.html"><strong aria-hidden="true">7.</strong> ⚠️维护</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="maintain/monitor.html"><strong aria-hidden="true">7.1.</strong> 监视器</a></li><li class="chapter-item expanded "><a href="maintain/runtime_upgrades.html"><strong aria-hidden="true">7.2.</strong> 运行时升级</a></li></ol></li><li class="chapter-item expanded "><a href="tutorials/index.html"><strong aria-hidden="true">8.</strong> 💾教程</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="tutorials/build_a_blockchain.html"><strong aria-hidden="true">8.1.</strong> 构建区块链</a></li><li class="chapter-item expanded "><a href="tutorials/build_application_logic.html"><strong aria-hidden="true">8.2.</strong> 构建应用程序逻辑</a></li><li class="chapter-item expanded "><a href="tutorials/build_a_parachain.html"><strong aria-hidden="true">8.3.</strong> 构建平行链</a></li></ol></li><li class="chapter-item expanded "><a href="reference/index.html"><strong aria-hidden="true">9.</strong> 参考</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="reference/rust_api.html"><strong aria-hidden="true">9.1.</strong> Rust API</a></li><li class="chapter-item expanded "><a href="reference/glossary.html"><strong aria-hidden="true">9.2.</strong> 词汇表</a></li><li class="chapter-item expanded "><a href="reference/command_line_tools.html"><strong aria-hidden="true">9.3.</strong> 命令行工具</a></li><li class="chapter-item expanded "><a href="reference/runtime_apis.html"><strong aria-hidden="true">9.4.</strong> 运行时 API</a></li><li class="chapter-item expanded "><a href="reference/frame_pallets.html"><strong aria-hidden="true">9.5.</strong> 框架托盘</a></li><li class="chapter-item expanded "><a href="reference/frame_macors.html"><strong aria-hidden="true">9.6.</strong> 框架宏</a></li><li class="chapter-item expanded "><a href="reference/account_data_structures.html"><strong aria-hidden="true">9.7.</strong> 帐户数据结构</a></li><li class="chapter-item expanded "><a href="reference/type_encoding.html"><strong aria-hidden="true">9.8.</strong> 类型编码 (SCALE)</a></li><li class="chapter-item expanded "><a href="reference/address_formats.html"><strong aria-hidden="true">9.9.</strong> 地址格式</a></li><li class="chapter-item expanded "><a href="reference/transaction_fromats.html"><strong aria-hidden="true">9.10.</strong> 交易格式</a></li><li class="chapter-item expanded "><a href="reference/xcm_reference.html"><strong aria-hidden="true">9.11.</strong> XCM参考</a></li><li class="chapter-item expanded "><a href="reference/how_to_reference_guides.html"><strong aria-hidden="true">9.12.</strong> 操作方法快速参考指南</a></li></ol></li><li class="chapter-item expanded "><a href="community/index.html"><strong aria-hidden="true">10.</strong> 🏠社区</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="community/content_style_guide.html"><strong aria-hidden="true">10.1.</strong> 内容风格指南</a></li><li class="chapter-item expanded "><a href="community.contributor_guidelines.html"><strong aria-hidden="true">10.2.</strong> 贡献者指南</a></li><li class="chapter-item expanded "><a href="community/template_how_to_guide.html"><strong aria-hidden="true">10.3.</strong> 模板 - 操作指南</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Substra官方文档中文版</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="快速入门"><a class="header" href="#快速入门">🔜快速入门</a></h1>
<p>快速入门假定您是一位没有使用 Substrate 或 FRAME 的经验的新开发者，但您知道这些工具的存在。快速入门还假定您希望简化设置开发环境并在本地计算机上启动区块链节点的入口。</p>
<p>在快速入门中，您将简要了解 Substrate 是什么，学习如何编译和启动节点，并对节点模板代码进行简短的介绍。以下主题意在按顺序阅读，快速学习如何使用 Substrate 进行构建：</p>
<ul>
<li><a href="quick_start/./substrate_at_a_glance.html">一览 Substrate</a></li>
<li><a href="quick_start/./start_a_node.html">启动节点</a></li>
<li><a href="quick_start/./explor_the_code.html">探索代码</a></li>
<li><a href="quick_start/./modify_the_runtime.html">修改运行时</a></li>
</ul>
<p>如果快速入门不是您的首选路径，您可以采用其他方法阅读 Substrate 构建文档。例如，您可以直接深入学习 <a href="quick_start/../learn/index.html">&quot;学习&quot;</a> 部分的核心概念，或者在 <a href="quick_start/../tutorials/index.html">&quot;教程&quot;</a> 部分进行实践练习。</p>
<p>为了帮助您找到适合您的路线，请将 Substrate 文档划分为三个部分：开发者之旅、教程和 API 参考部分。尽管这些部分之间互相关联，但每个部分以不同的方式呈现信息，并具有不同的目的：</p>
<p><strong>开发者之旅</strong>以叙事方式呈现信息：</p>
<ul>
<li><a href="quick_start/../learn/index.html">学习</a>介绍区块链和 Substrate 的核心概念和操作。</li>
<li><a href="quick_start/../install/index.html">安装</a>提供特定于平台的安装说明，并解决与安装相关的问题。</li>
<li><a href="quick_start/../build/index.html">构建</a>介绍构建自定义区块链应用程序的工具和技术。</li>
<li><a href="quick_start/../test/index.html">测试</a>介绍在部署到测试网络或生产环境之前进行单元测试和基准测试的方法。</li>
<li><a href="quick_start/../deploy/index.html">部署</a>描述了部署节点的不同选项，如何准备部署以及如何从测试网络转移到生产网络。</li>
<li><a href="quick_start/../maintain/index.html">维护</a>提供有关使用硬件和软件升级、管理新版本以及维护基础架构的一般信息。</li>
</ul>
<p><strong>教程</strong>提供实践学习体验，涵盖构建和管理基于 Substrate 的区块链的不同方面：</p>
<ul>
<li><a href="quick_start/../tutorials/build_a_blockchain.html">构建区块链</a>教程专注于从启动单个节点到创建私有的四节点区块链、监控节点操作和升级正在运行的网络的网络基础知识。</li>
<li><a href="quick_start/../tutorials/build_application_logic.html">构建应用逻辑</a>教程专注于如何实现与现有和自定义的 pallets（板块）一起工作的应用程序特定逻辑。</li>
<li><a href="quick_start/../tutorials/build_a_parachain.html">构建平行链</a>教程专注于如何从独立链移动到平行链，将平行链连接到中继链，并在链之间发送消息。</li>
</ul>
<p><strong>参考</strong>部分提供直接访问技术信息，如 Rust API 和命令行工具的帮助信息。</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="substrate-一览"><a class="header" href="#substrate-一览">Substrate 一览</a></h1>
<p>本文简要概述了用于构建应用程序优化区块链的 Substrate 框架。本文档的其他部分更详细地介绍了此处提到的所有主题。</p>
<h2 id="什么是substrate"><a class="header" href="#什么是substrate">什么是Substrate?</a></h2>
<p>Substrate 是一个软件开发工具包 (SDK)，它使用基于 Rust 的库和工具，使您能够从模块化和可扩展的组件构建特定于应用程序的区块链。使用 Substrate 构建的特定于应用程序的区块链可以作为独立服务运行，也可以与其他链并行运行，以利用 Polkadot 生态系统提供的共享安全性。 Substrate 包括区块链基础设施核心组件的默认实现，让您可以专注于应用程序逻辑。</p>
<h2 id="什么是frame"><a class="header" href="#什么是frame">什么是FRAME?</a></h2>
<p>FRAME 提供了核心模块化和可扩展组件，使 Substrate 软件开发工具包具有灵活性并可适应不同的用例。 FRAME 包括基于 Rust 的程序和库，它们简化了特定于应用程序的逻辑的开发。 FRAME 提供的大部分功能都采用称为 pallet 的插件模块形式，您可以添加和配置这些模块以满足您的要求。</p>
<h2 id="为什么要使用-substrate-和-frame"><a class="header" href="#为什么要使用-substrate-和-frame">为什么要使用 Substrate 和 FRAME？</a></h2>
<p>通过使用 Substrate 和 FRAME，您可以构建概念验证应用程序特定的区块链，而无需从头开始构建区块链的复杂性或在通用区块链上构建的限制。借助 Substrate 和 FRAME，您可以专注于打造业务逻辑，使您的链具有独特性和创新性，并具有灵活性、可升级性、开源许可和跨共识互操作性等额外优势。</p>
<h2 id="什么是-substrate-节点"><a class="header" href="#什么是-substrate-节点">什么是 Substrate 节点？</a></h2>
<p>每个区块链平台都依赖于分散的计算机网络（称为节点），这些计算机就交易和区块相互通信。通常，此上下文中的节点是在连接的设备上运行的软件，而不是网络中的物理或虚拟机。作为软件，Substrate 节点由两个主要部分组成，它们具有独立的职责：</p>
<ul>
<li>具有外部节点服务的核心客户端，用于处理网络和区块链基础设施活动。</li>
<li>具有状态转换业务逻辑和区块链当前状态的运行时。</li>
</ul>
<h2 id="为什么要构建自定义运行时"><a class="header" href="#为什么要构建自定义运行时">为什么要构建自定义运行时？</a></h2>
<p>将职责分离为客户端驱动的活动和运行时驱动的活动是使 Substrate 节点可升级的关键部分。应用程序逻辑使您的链独一无二，它以 WebAssembly 二进制文件的形式存储在链上。如果您对应用程序逻辑进行了更改，您只需编译一个新的 WebAssembly 二进制文件。然后，您可以提交交易以使用更新后的二进制文件更新当前存储在链上的 WebAssembly 二进制文件。由于自定义运行时是一个独立的对象，作为链状态的一部分存储，您可以轻松地迭代应用程序设计并随着社区的发展而发展您的项目。</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="启动一个节点"><a class="header" href="#启动一个节点">启动一个节点</a></h1>
<p>所有 Substrate 教程和操作指南都要求您在开发环境中构建和运行 Substrate 节点。为了帮助您快速设置工作环境，<a href="https://github.com/substrate-developer-hub/">Substrate Developer Hub</a> 维护了模板供您使用。例如，<a href="https://github.com/substrate-developer-hub/substrate-node-template/tags/">substrate-node-template</a> 是主要 Substrate node-template 二进制文件的快照，其中包含一组核心功能，可帮助您入门。</p>
<p>启动节点后，您可以使用 Web 浏览器和一个简单的应用程序连接到它，该应用程序允许您查找预定义帐户的余额。</p>
<h2 id="在你开始之前"><a class="header" href="#在你开始之前">在你开始之前</a></h2>
<p>在开始之前，请验证以下内容：</p>
<ul>
<li>您有互联网连接并可以访问本地计算机上的交互式 shell 终端。</li>
<li>您通常熟悉软件开发和使用命令行界面。</li>
<li>您已经安装了 Rust 编译器和工具链。</li>
</ul>
<p>您可以通过运行 <code>rustup show</code> 命令检查是否安装了 Rust。如果安装了 Rust，此命令会显示工具链和编译器的版本信息。如果未安装 Rust，该命令不会返回任何输出。有关安装 Rust 的信息，请参阅<a href="quick_start/../install/index.html">安装</a>。</p>
<h2 id="构建subtrate-node-template"><a class="header" href="#构建subtrate-node-template">构建Subtrate node template</a></h2>
<ol>
<li>通过运行以下命令克隆节点模板存储库：</li>
</ol>
<pre><code class="language-bash">git clone https://github.com/substrate-developer-hub/substrate-node-template
</code></pre>
<p>此命令克隆 main 分支。</p>
<p>或者，您可以使用 <code>--branch</code> 命令行选项和标签来指定您希望节点兼容的 Polkadot 版本。</p>
<ol start="2">
<li>更改为克隆目录的根目录：</li>
</ol>
<pre><code class="language-bash">cd substrate-node-template
</code></pre>
<ol start="3">
<li>通过运行类似于以下的命令创建一个新分支以保存您的工作：</li>
</ol>
<pre><code class="language-bash">git switch -c my-learning-branch-yyyy-mm-dd
</code></pre>
<p>您可以使用您选择的任何识别信息来命​​名分支机构。在大多数情况下，您应该在名称中包含克隆分支的年月日信息。例如：</p>
<pre><code class="language-bash">git switch -c my-learning-branch-2023-03-31
</code></pre>
<ol start="4">
<li>编译节点模板：</li>
</ol>
<pre><code class="language-bash">cargo build --package node-template --release
</code></pre>
<p>第一次编译节点时，可能需要一些时间才能完成。编译完成后，您应该看到如下一行：</p>
<pre><code class="language-bash">Finished release [optimized] target(s) in 11m 23s
</code></pre>
<h2 id="查看节点信息"><a class="header" href="#查看节点信息">查看节点信息</a></h2>
<ol>
<li>通过运行以下命令验证您的节点是否已准备好使用并查看有关可用命令行选项的信息：</li>
</ol>
<pre><code class="language-bash">./target/release/node-template --help
</code></pre>
<p>使用信息显示可用于以下操作的命令行选项：</p>
<ul>
<li>启动节点</li>
<li>使用帐户和密钥</li>
<li>修改节点操作</li>
</ul>
<ol start="2">
<li>通过运行以下命令查看预定义的 <code>Alice</code> 开发帐户的帐户信息：</li>
</ol>
<pre><code class="language-bash">./target/release/node-template key inspect //Alice
</code></pre>
<p>该命令显示以下帐户和地址信息：</p>
<pre><code class="language-bash">Secret Key URI `//Alice` is account:
Network ID:        substrate
Secret seed:       0xe5be9a5092b81bca64be81d212e7f2f9eba183bb7a90954f7b76361f6edb5c0a
Public key (hex):  0xd43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d
Account ID:        0xd43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d
Public key (SS58): 5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY
SS58 Address:      5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY
</code></pre>
<p><code>Alice</code> 和 <code>Bob</code> 等预定义开发帐户在链规范文件中配置。您将在<a href="quick_start/./explor_the_code.html">探索代码</a>中了解有关节点模板文件的更多信息，并在<a href="quick_start/../build/chain_speficication.html">链规范</a>中更具体地了解链规范文件。现在，只要知道存在开发帐户就可以测试余额转账等简单交易就足够了。</p>
<h2 id="启动区块链"><a class="header" href="#启动区块链">启动区块链</a></h2>
<ol>
<li>通过运行以下命令以开发模式启动节点：</li>
</ol>
<pre><code class="language-bash">./target/release/node-template --dev
</code></pre>
<p>在开发模式下，链不需要任何对等计算机来完成块。当节点启动时，终端会显示有关所执行操作的输出。如果您看到正在提议和最终确定块的消息，则您有一个正在运行的节点。</p>
<pre><code class="language-bash">... Idle (0 peers), best: #3 (0xcc78…5cb1), finalized #1 ...
... Starting consensus session on top of parent ...
... Prepared block for proposing at 4 (0 ms) ...
</code></pre>
<h2 id="连接到节点"><a class="header" href="#连接到节点">连接到节点</a></h2>
<p>现在您的节点正在运行，您可以连接到它以检查预定义的 <code>Alice</code> 帐户的余额。对于这个简单的应用程序，您可以创建一个 <code>index.html</code> HTML 文件，该文件使用 JavaScript 和 <a href="https://polkadot.js.org/docs/api">Polkadot-JS API</a> 与区块链进行交互。</p>
<p>例如，此示例 <a href="https://docs.substrate.io/assets/quickstart/">index.html</a> 演示了如何使用 JavaScript、Polkadot-JS API 和 HTML 来执行以下操作：</p>
<ul>
<li>输入一个账户地址。</li>
<li>使用 <code>onClick</code> 事件查找帐户余额。</li>
<li>将帐户余额显示为输出。</li>
</ul>
<p>要连接到节点并检查帐户余额：</p>
<ol>
<li>将快速入门的<a href="https://docs.substrate.io/assets/quickstart/">示例代码</a>复制并粘贴：获取 Balance 应用程序到代码编辑器中的一个新文件中，并将该文件保存在本地计算机上。</li>
<li>在 Web 浏览器中打开 <code>index.html</code> 文件。</li>
<li>在输入字段中复制并粘贴 <code>Alice</code> 帐户的 SS58 地址，然后单击获取余额。</li>
</ol>
<h2 id="停止节点"><a class="header" href="#停止节点">停止节点</a></h2>
<ol>
<li>转到显示区块链操作的终端。</li>
<li>按 control-c 组合键停止本地区块链并清除所有状态。</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="探索代码"><a class="header" href="#探索代码">探索代码</a></h1>
<p>在启动节点中，您在开发模式下编译并启动了本地 Substrate 节点。这个特定的节点—— <code>substrate-node-template</code> ——提供了一个简化的环境，只有几个通用模块可以帮助您入门。无需深入了解细节，您可以从探索节点模板代码的基本构建块中学到很多东西。</p>
<h2 id="关于节点模板"><a class="header" href="#关于节点模板">关于节点模板</a></h2>
<p>节点模板包括一些默认的区块链要素，如点对点网络、简单的共识机制和交易处理。节点模板还包括一些用于处理账户、余额和交易费用以及执行管理操作的基本功能。这组核心功能是通过几个实现特定功能的预定义模块（称为托盘）提供的。</p>
<p>例如，节点模板中预定义了以下核心模块：</p>
<ul>
<li><code>pallet_balances</code> 用于管理账户资产和账户间转账。</li>
<li><code>pallet_transaction_payment</code> 用于管理所执行交易的交易费用。</li>
<li><code>pallet_sudo</code> 用于执行需要管理权限的操作。</li>
</ul>
<p>节点模板还提供了一个启动器 <code>pallet_template</code> ，它说明了如何在自定义托盘中实现功能。</p>
<p>现在您已经大致了解了节点模板中包含的功能，让我们仔细看看 <code>substrate-node-template</code> 目录及其子目录中的代码。</p>
<h2 id="manifest-files"><a class="header" href="#manifest-files">Manifest files</a></h2>
<p>因为 Substrate 是一个基于 Rust 的框架，所以每个包都有一个清单文件—— <code>Cargo.toml</code> 文件——其中包含编译包所需的信息。如果您打开位于 <code>substrate-node-template</code> 根目录中的 <code>Cargo.toml</code> 文件，您可以看到它描述了构成节点模板工作区的成员包。例如：</p>
<pre><code class="language-toml">[workspace]
members = [
    &quot;node&quot;,
    &quot;pallets/template&quot;,
    &quot;runtime&quot;,
]
[profile.release]
panic = &quot;unwind&quot;
</code></pre>
<p>从此清单中，您可以看到节点模板工作区包括三个包：</p>
<ul>
<li><code>node</code> 包为许多核心区块链服务提供 Rust 模块，例如对等网络、区块创作、区块终结和交易池管理。</li>
<li><code>pallets</code> 子目录中的 <code>template</code> 包是入门模板，它说明了在构建您自己的自定义模块时如何实现功能。</li>
<li><code>runtime</code> 包提供了所有用于处理帐户、余额、交易费用和节点模板中包含的其他功能的应用程序逻辑。</li>
</ul>
<p>每个成员包也有自己的清单——它自己的 <code>Cargo.toml</code> 文件——包含特定于包的信息，包括编译该成员包所需的依赖项和配置设置。例如，工作区 <code>node</code> 成员的 <code>Cargo.toml</code> 文件指定包的名称为 <code>node-template</code> ，并列出使节点模板能够提供基本区块链服务的核心库和原语。您将在 <a href="quick_start/../learn/arhitecture_and_rust.html">Architecture 和 Rust 库</a>中了解有关库和原语的更多信息。现在，了解清单在描述每个包的依赖关系和其他关键信息方面的重要性就足够了。</p>
<p>如果您打开 <code>runtime/Cargo.toml</code> 文件和 <code>pallets/template/Cargo.toml</code> ，您将看到不同的库和基元作为依赖项，但您将大致了解编译这些包需要什么。例如，运行时的清单列出了所有托盘——包括 <code>frame_system</code> 、 <code>frame_support</code> 和前面提到的 <code>pallet_balances</code> 、 <code>pallet_transaction_payment</code> 和 <code>pallet_sudo</code> 模块——它们构成了节点模板的默认运行时.</p>
<h2 id="核心客户端源代码"><a class="header" href="#核心客户端源代码">核心客户端源代码</a></h2>
<p>Substrate 最重要的方面之一是节点由两个主要部分组成：核心客户端和运行时。节点模板还包含 <code>node/src</code> 目录中的核心客户端服务和 <code>runtime/src</code> 目录中的运行时的单独包。</p>
<p>默认情况下， node/src 目录包含以下 Rust 模块：</p>
<ul>
<li><code>benchmarking.rs</code></li>
<li><code>chain_spec.rs</code></li>
<li><code>cli.rs</code></li>
<li><code>command.rs</code></li>
<li><code>lib.rs</code></li>
<li><code>main.rs</code></li>
<li><code>rpc.rs</code></li>
<li><code>service.rs</code></li>
</ul>
<p>大多数核心客户端服务都封装在 <code>node/src/service.rs</code> Rust 模块中。您很少需要修改此文件或 <code>node/src</code> 目录中的其他 Rust 模块。您可能要修改的文件是 <code>chain_spec.rs</code> 文件。 <code>chain_spec.rs</code> 文件描述了默认Development链和Local Testnet链的配置，包括默认预注资开发账户信息和预配置出块权限的节点信息。如果创建自定义链，则使用此文件来标识节点连接到的网络以及本地节点与之通信的其他节点。</p>
<h2 id="默认节点模板运行时"><a class="header" href="#默认节点模板运行时">默认节点模板运行时</a></h2>
<p>由于 Substrate 为构建区块链提供了模块化和灵活的框架，您可以对工作区中的任何包进行更改。然而，大多数应用程序开发工作是在运行时和用于构建运行时的模块（托盘）中完成的。在开始为您自己的项目自定义运行时之前，您应该花一点时间探索默认节点模板中的内容。</p>
<h3 id="default-manifest"><a class="header" href="#default-manifest">Default manifest</a></h3>
<p>您已经看到运行时的默认清单如何在类似于以下的行中列出运行时的默认依赖项和功能：</p>
<pre><code class="language-toml">pallet-balances = { version = &quot;4.0.0-dev&quot;, default-features = false, git = &quot;https://github.com/paritytech/substrate.git&quot;, branch = &quot;polkadot-vX.Y.Z&quot; }

pallet-sudo = { version = &quot;4.0.0-dev&quot;, default-features = false, git = &quot;https://github.com/paritytech/substrate.git&quot;, branch = &quot;polkadot-vX.Y.Z&quot; }

pallet-transaction-payment = { version = &quot;4.0.0-dev&quot;, default-features = false, git = &quot;https://github.com/paritytech/substrate.git&quot;, branch = &quot;polkadot-vX.Y.Z&quot; }
</code></pre>
<p>还有对核心包的依赖关系——例如 <code>frame-system</code> 、 <code>frame-support</code> 和 <code>frame-executive</code> 。您将在核心框架服务中了解有关这些核心服务的更多信息。现在，只需注意这些和其他模块是编译节点模板的运行时所必需的。</p>
<h3 id="默认源代码"><a class="header" href="#默认源代码">默认源代码</a></h3>
<p>运行时的主要源代码位于 <code>runtime/src/lib.rs</code> 文件中。如果您在代码编辑器中打开此文件，起初它可能看起来很复杂。文档的其他部分涵盖了一些细微差别，但本质上，源代码执行以下操作：</p>
<ul>
<li>导入 <code>framesystem</code> 和 <code>framesupport</code> 核心服务。</li>
<li>指定运行时的版本信息。</li>
<li>声明要包含的托盘。</li>
<li>声明包含的每个托盘的类型和参数。</li>
<li>为包含的每个托盘设置常量和变量值。</li>
<li>为包含的每个托盘实现 <code>Config</code> trait。</li>
<li>从包含的托盘构建运行时。</li>
<li>准备用于评估托盘性能的基准测试框架。</li>
<li>实现使核心客户端能够调用运行时的接口。</li>
</ul>
<p>您将在<a href="quick_start/../build/index.html">构建</a>和<a href="quick_start/../test/index.html">测试</a>部分的主题中了解有关构建运行时、定义基准和使用运行时接口的更多信息。现在，您只需要大致了解运行时是如何组成的，以及默认托盘是如何使用 <code>Config</code> Trait实现的。</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="修改运行时"><a class="header" href="#修改运行时">修改运行时</a></h1>
<p>在探索代码中，您了解了构成默认节点模板的清单文件和 Rust 模块。现在您对运行时源代码的外观有了大致的了解，让我们看看通过一些简单的更改来自定义运行时是多么容易。</p>
<p>对于这个简单的演示，您将执行以下操作：</p>
<ul>
<li>添加一个具有您要使用的某些功能的托盘。</li>
<li>更改一些常量值。</li>
<li>更新运行时版本。</li>
<li>重新编译运行时以包含您的更改。</li>
<li>提交交易以更新存储在链上的运行时。</li>
</ul>
<p>您还将看到另一个使用 Polkadot-JS API 的应用程序，以及如何使用该应用程序的托管版本来查看链状态和提交交易。</p>
<h2 id="在你开始之前-1"><a class="header" href="#在你开始之前-1">在你开始之前</a></h2>
<p>当您使用 --dev 命令行选项在开发模式下运行节点时，它会以干净的状态启动第一个块。为了最好地说明如何修改和更新运行时，您应该使用默认运行时重新启动默认节点模板，以便它开始生成块。</p>
<p>要使用默认运行时重新启动节点：</p>
<ol>
<li>在您的计算机上打开终端外壳。</li>
<li>切换到编译 Substrate 节点模板的根目录。</li>
<li>通过运行以下命令以开发模式启动本地节点：
<pre><code class="language-bash">cargo run --release -- --dev
</code></pre>
</li>
</ol>
<p>启动节点后，您可以使用使用 Polkadot-JS API 构建的基于浏览器的应用程序连接到它。</p>
<p>要连接到正在运行的节点：</p>
<p>1.在 Chrome 或基于 Chromium 的浏览器中打开 <a href="https://polkadot.js.org/apps/#/explorer">Polkadot/Substrate 门户</a>。 如果您使用限制性更强的浏览器——例如 Firefox——您可能会发现 Polkadot/Substrate 门户和节点之间的连接被阻止。</p>
<ol start="2">
<li>
<p>如有必要，连接到开发网络和默认本地节点端点 127.0.0.1:9944 。
在大多数情况下，<a href="https://polkadot.js.org/apps/#/explorer">Polkadot/Substrate Portal</a> 会自动初始化与正在运行的本地节点的连接。如果需要，单击 Unknown 以显示网络选择菜单，然后选择 Development 和 Local Node，然后单击 Switch。</p>
</li>
<li>
<p>请注意，在开发下，节点模板版本是默认版本 100。</p>
<p><img src="https://docs.substrate.io/static/c2fb81c66cb08d25c1a3d253bc4e339a/01a2d/quickstart-100.avif" alt="" /></p>
</li>
</ol>
<h2 id="添加托盘"><a class="header" href="#添加托盘">添加托盘</a></h2>
<p>开始使用 Substrate 和 FRAME 进行构建的最常见方法涉及添加 pallet，方法是从现有库中导入 pallet 或创建自己的 pallet。从头开始创建您自己的 pallet 并不困难，但它需要更多的工作来设计应用程序逻辑、存储要求、错误处理等。为了简单起见，让我们通过从现有库中导入一个托盘来添加一个托盘。</p>
<p>默认情况下，节点模板不包含 <a href="quick_start/">Utility pallet</a>。如果此 pallet 包含您要使用的功能，您可以将其添加到默认运行时。</p>
<p>要添加实用程序托盘：</p>
<p>1.在您的计算机上打开第二个终端 shell 并切换到节点模板根目录。
2.在代码编辑器中打开运行时清单 — runtime/Cargo.toml 。
3. 找到 [dependencies] 部分并将 Utility pallet 添加为依赖项。
例如，您应该添加类似于以下内容的一行。</p>
<pre><code class="language-toml">pallet-utility = { version = &quot;4.0.0-dev&quot;, default-features = false, git = &quot;https://github.com/paritytech/substrate.git&quot;, branch = &quot;polkadot-vX.Y.Z&quot; }
</code></pre>
<p>请务必将 branch = &quot;polkadot-vX.Y.Z&quot; 替换为用于其他 pallet 的 Polkadot 分支。</p>
<p>您可以将任何现有托盘依赖项复制为模型，以确保 pallet-utility 依赖项的分支设置与所有其他托盘的分支设置相同。</p>
<ol start="4">
<li>找到 [features] 部分并将 Utility pallet 添加到标准二进制文件的默认功能列表中。</li>
</ol>
<p>例子：</p>
<pre><code class="language-toml">[features]
default = [&quot;std&quot;]
std = [
  ...
  &quot;pallet-utility/std&quot;,
  ...
]
</code></pre>
<p>您将了解更多有关在 <a href="quick_start/">Rust 和 WebAssembly</a> 中为标准和 WebAssembly 二进制文件构建功能的信息。</p>
<ol start="5">
<li>保存更改并关闭 Cargo.toml 文件。</li>
<li>在代码编辑器中打开 runtime/src/lib.rs 文件。</li>
<li>为 Utility pallet 添加 Config trait 的实现。</li>
</ol>
<p>例子：</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl pallet_utility::Config for Runtime {
  type RuntimeEvent = RuntimeEvent;
  type RuntimeCall = RuntimeCall;
  type PalletsOrigin = OriginCaller;
  type WeightInfo = pallet_utility::weights::SubstrateWeight&lt;Runtime&gt;;
}
<span class="boring">}
</span></code></pre></pre>
<p>每个 pallet 都有一个 Config 特性来表示它需要的特定参数和类型。您可以随时查看 pallet 的 Rust 文档，以了解有关其配置要求的更多信息。例如，您可以查看 <a href="quick_start/">pallet-utility</a> 的 Rust 文档。</p>
<ol start="8">
<li>在 construct_runtime! 宏中添加 Utility pallet。</li>
</ol>
<p>例子：</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>construct_runtime!(
 pub struct Runtime
 where
    Block = Block,
    NodeBlock = opaque::Block,
    UncheckedExtrinsic = UncheckedExtrinsic
 {
        System: frame_system,
        RandomnessCollectiveFlip: pallet_randomness_collective_flip,
        Timestamp: pallet_timestamp,
        Aura: pallet_aura,
        ...
        Utility: pallet_utility, // Add this line
        ...
 }

<span class="boring">}
</span></code></pre></pre>
<p>您可以了解有关 <code>construct_runtime</code> 宏如何在 <a href="quick_start/">FRAME 宏</a>和<a href="quick_start/">运行时</a>构造宏中工作的更多信息。</p>
<h2 id="更改常量值"><a class="header" href="#更改常量值">更改常量值</a></h2>
<p>默认情况下，节点模板中的 Balances pallet 定义了一个 EXISTENTIAL_DEPOSIT 常量。 EXISTENTIAL_DEPOSIT 代表一个账户必须被视为有效活跃账户的最低余额。默认情况下，常量被定义为值为 500 的 128 位无符号整数类型。为简单起见，您要将此常量的值从 500 更改为 1000。</p>
<ol>
<li>
<p>在代码编辑器中打开 runtime/src/lib.rs 文件。</p>
</li>
<li>
<p>找到 Balances pallet 的 EXISTENTIAL_DEPOSIT 。</p>
</li>
</ol>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Existential deposit.
pub const EXISTENTIAL_DEPOSIT: u128 = 500;
<span class="boring">}
</span></code></pre></pre>
<ol start="3">
<li>更新 EXISTENTIAL_DEPOSIT 的值。</li>
</ol>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub const EXISTENTIAL_DEPOSIT: u128 = 1000 // Update this value.
<span class="boring">}
</span></code></pre></pre>
<h2 id="更新运行时版本"><a class="header" href="#更新运行时版本">更新运行时版本</a></h2>
<p>默认情况下，节点模板使用 spec_version 和值 100 标识 VERSION 常量中的默认运行时版本。要指示您已对默认运行时进行更改，您将更改 @2 # 从 100 到 101。</p>
<p>请注意，对于您在快速入门中对默认运行时所做的更改，并非严格要求更新 spec_version 。但是，通过更新版本，您可以看到执行无叉升级所涉及的基本步骤。</p>
<p>要更新运行时版本：</p>
<ol>
<li>
<p>在代码编辑器中打开 runtime/src/lib.rs 文件。</p>
</li>
<li>
<p>找到 runtime_version 宏。</p>
</li>
</ol>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[sp_version::runtime_version]
pub const VERSION: RuntimeVersion = RuntimeVersion {
    spec_name: create_runtime_str!(&quot;node-template&quot;),
    impl_name: create_runtime_str!(&quot;node-template&quot;),
    authoring_version: 1,
    spec_version: 100,
    impl_version: 1,
    apis: RUNTIME_API_VERSIONS,
    transaction_version: 1,
    state_version: 1,
};
<span class="boring">}
</span></code></pre></pre>
<ol start="3">
<li>更新 spec_version 以指定新的运行时版本。</li>
</ol>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>spec_version: 101,  // Change the spec_version from 100 to 101
<span class="boring">}
</span></code></pre></pre>
<ol start="4">
<li>保存更改并关闭 runtime/src/lib.rs 文件。</li>
</ol>
<p>此时，您已经修改了运行时代码并更改了版本信息。但是，正在运行的节点仍在使用先前编译的运行时版本。如果您仍然使用 <a href="quick_start/">Polkadot/Substrate 门</a>户连接到正在运行的节点，您可以看到节点模板版本仍然是默认版本 100，余额常量 existentialDeposit 的<a href="quick_start/">链状态</a>仍然是 500。</p>
<h3 id="重新编译运行时"><a class="header" href="#重新编译运行时">重新编译运行时</a></h3>
<p>在更新节点模板以使用修改后的运行时之前，您必须重新编译运行时</p>
<p>要重新编译运行时包：</p>
<ol>
<li>打开第二个终端 shell 并切换到编译节点模板的根目录。
2.通过运行以下命令重新编译运行时：</li>
</ol>
<pre><code class="language-bash">cargo build --release --package node-template-runtime
</code></pre>
<p>--release 命令行选项需要更长的编译时间。但是，它会生成一个更小的构建工件，更适合提交到区块链网络。存储优化对任何区块链都至关重要。使用此命令，构建工件将输出到 target/release 目录。 WebAssembly 构建工件位于 target/release/wbuild/node-template-runtime 目录中。例如，如果您列出 target/release/wbuild/node-template-runtime 目录的内容，您应该会看到以下 WebAssembly 工件：</p>
<pre><code class="language-bash">node_template_runtime.compact.compressed.wasm
node_template_runtime.compact.wasm
node_template_runtime.wasm
</code></pre>
<h2 id="提交交易"><a class="header" href="#提交交易">提交交易</a></h2>
<p>您现在有一个更新的 WebAssembly 对象，它描述了修改后的运行时。但是，正在运行的节点尚未使用升级后的运行时。要更新存储在链上的运行时，您必须提交一个更改要使用的 WebAssembly 对象的交易。</p>
<p>要更新运行时：</p>
<ol>
<li>在 Polkadot/Substrate 门户中，单击 Developer 并选择 Extrinsics。</li>
<li>选择管理 Alice 帐户。</li>
<li>选择 sudo pallet 和 sudoUncheckedWeight(call, weight) 函数。
4.选择 system 和 setCode(code) 作为使用 Alice 帐户进行的调用。</li>
<li>单击文件上传，然后选择或拖放您为更新的运行时生成的紧凑且压缩的 WebAssembly 文件 — node_template_runtime.compact.compressed.wasm 。</li>
</ol>
<p>例如，导航到 target/release/wbuild/node-template-runtime 目录并选择 node_template_runtime.compact.compressed.wasm 作为要上传的文件。</p>
<p>6.将两个权重参数设置为默认值 0 。</p>
<p><img src="https://docs.substrate.io/static/1abb15872875a741ba7957a77463480a/0f4c1/set-code-transaction.avif" alt="" /></p>
<ol start="7">
<li>单击提交交易。</li>
<li>查看授权，然后单击“签名并提交”。</li>
</ol>
<h2 id="验证修改后的运行时"><a class="header" href="#验证修改后的运行时">验证修改后的运行时</a></h2>
<p>事务包含在块中后，您可以验证您使用的是修改后的运行时。</p>
<p>要验证您的更改：</p>
<ol>
<li>在 <a href="quick_start/">Polkadot/Substrate Portal</a> 中，点击 Network 并选择 Explorer 可以看到已经有一个成功的 sudo.Sudid 事件。</li>
</ol>
<p><img src="https://docs.substrate.io/static/acc82575c3cb918243bcb63731c7e2fd/ae6f6/set-code-sudo-event.avif" alt="" /></p>
<ol start="2">
<li>检查节点模板版本现在是 101 。</li>
</ol>
<p>例如：</p>
<p><img src="https://docs.substrate.io/static/d2b284ae84ff285bd030d91aa16f35b0/01a2d/quickstart-101.avif" alt="" /></p>
<ol start="3">
<li>
<p>单击 Developer 并选择 Extrinsics。</p>
</li>
<li>
<p>单击 submit the following extrinsic 并滚动到列表底部以验证实用工具托盘是否作为一个选项可用。</p>
</li>
</ol>
<p><img src="https://docs.substrate.io/static/b6d4b1158817952d65b3969e402f57a3/58d4a/quickstart-utility-pallet.avif" alt="" /></p>
<ol start="5">
<li>
<p>点击 Developer ，选择 Chain state，然后点击 <a href="https://polkadot.js.org/apps/#/chainstate/constants?rpc=ws://127.0.0.1:9944">Constants</a>。</p>
</li>
<li>
<p>选择balances pallet，选择existentialDeposit，然后点击+查询常量值。</p>
</li>
</ol>
<p><img src="https://docs.substrate.io/static/b0ccb722efcfbc95f68eefd19af972f0/0cdde/quickstart-chain-state.avif" alt="" /></p>
<h2 id="下一步去哪里"><a class="header" href="#下一步去哪里">下一步去哪里</a></h2>
<p>验证更改后，您知道您正在运行自定义版本的节点模板，并且已成功升级本地节点以使用修改后的运行时。</p>
<p>这是一项了不起的成就，但您还可以做更多的事情。要深入了解概念和核心组件，请查看“学习”部分中的主题，或者通过探索“构建”部分中的主题，开始构建您目前所学的内容。</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="学习"><a class="header" href="#学习">📑学习</a></h1>
<p>Substrate 是一个使用基于 Rust 的库和工具的软件开发工具包（SDK），它使您能够从模块化和可扩展的组件构建特定应用的区块链。本节中的主题解释了 Substrate 开发环境的核心原理和独特功能。</p>
<p>这些主题旨在帮助您了解在构建基于 Substrate 的区块链时可能的选择，以及 Substrate 如何帮助您构建最适合您特定项目需求或业务模型的区块链。</p>
<ul>
<li>欢迎来到 Substrate 强调了使用 Substrate 开发的关键优势，这是大多数区块链和智能合约平台无法提供的。</li>
<li>区块链基础知识提供了有关区块链开发的复杂性的背景，并介绍了常见的区块链概念、组件和术语。</li>
<li>架构和 Rust 库描述了 Substrate 的架构和架构与核心 Rust 库之间的关系。</li>
<li>网络和节点定义了可以使用 Substrate 构建的不同类型的网络拓扑结构以及节点可以扮演的不同角色。</li>
<li>您可以构建什么介绍了不同开发选项的优势和限制，以及为什么您可能会选择一种方法而不是另一种方法。</li>
<li>运行时开发强调了 Substrate 运行时的重要性，并介绍了 Substrate 运行时开发所需的核心应用程序接口和基本组件。</li>
<li>交易和区块基础知识介绍了交易类型和构成一个区块的组件。</li>
<li>交易生命周期解释了交易如何被接收、排队和执行，以便包含在一个区块中。</li>
<li>状态转换和存储描述了在运行时处理的状态变化如何使用 trie 数据结构和键值数据库进行存储和管理。</li>
<li>账户、地址和密钥解释了账户、地址和密钥之间的关系以及它们的使用方式。</li>
<li>Rust for Substrate 强调了构建基于 Substrate 的区块链所需的特定 Rust 特性，包括特质、泛型、关联类型和宏。</li>
<li>离链操作探讨了将某些操作处理为离链操作的原因，以及执行这些离链操作的替代方案。</li>
<li>在 Substrate Connect 中的轻客户端描述了如何使用 Substrate Connect 将轻客户端集成到您的应用程序中，并实现与任何基于 Substrate 的链的交互。</li>
<li>密码学提供了在 Substrate 中用于加密的哈希算法和签名方案的概述。</li>
<li>共识描述了最常见的共识模型以及您可以为 Substrate 区块链实现的共识类型。</li>
<li>跨共识消息提供了跨共识通信和跨共识消息（Cross-consensus messaging）的概述。</li>
</ul>
<p>在消化了这些入门部分的信息之后，您将准备好开始设计、构建和测试自己的定制区块链解决方案。</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="欢迎来到substrate"><a class="header" href="#欢迎来到substrate">欢迎来到substrate</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="区块链基础知识"><a class="header" href="#区块链基础知识">区块链基础知识</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="架构和rust库"><a class="header" href="#架构和rust库">架构和Rust库</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="网络和节点"><a class="header" href="#网络和节点">网络和节点</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="你能建造什么"><a class="header" href="#你能建造什么">你能建造什么</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="运行时开发"><a class="header" href="#运行时开发">运行时开发</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="交易和区块链基础知识"><a class="header" href="#交易和区块链基础知识">交易和区块链基础知识</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="交易生命周期"><a class="header" href="#交易生命周期">交易生命周期</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="状态转换和存储"><a class="header" href="#状态转换和存储">状态转换和存储</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="账户地址和密钥"><a class="header" href="#账户地址和密钥">账户、地址和密钥</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-for-substrate"><a class="header" href="#rust-for-substrate">Rust for Substrate</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="链下操作"><a class="header" href="#链下操作">链下操作</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="substrate-connect中的轻客户端"><a class="header" href="#substrate-connect中的轻客户端">Substrate Connect中的轻客户端</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="密码学"><a class="header" href="#密码学">密码学</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="共识"><a class="header" href="#共识">共识</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="跨共识消息传递"><a class="header" href="#跨共识消息传递">跨共识消息传递</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="安装"><a class="header" href="#安装">🤔️安装</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust工具链"><a class="header" href="#rust工具链">Rust工具链</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="linux"><a class="header" href="#linux">Linux</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="macos"><a class="header" href="#macos">MacOS</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="windows"><a class="header" href="#windows">Windows</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="开发者工具"><a class="header" href="#开发者工具">开发者工具</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="排查rust问题"><a class="header" href="#排查rust问题">排查Rust问题</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="建造"><a class="header" href="#建造">😄建造</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="智能合约"><a class="header" href="#智能合约">智能合约</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="定制pallet"><a class="header" href="#定制pallet">定制Pallet</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="运行时存储"><a class="header" href="#运行时存储">运行时存储</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="交易权重和费用"><a class="header" href="#交易权重和费用">交易权重和费用</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pallet-coupling"><a class="header" href="#pallet-coupling">Pallet coupling</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="事件和错误"><a class="header" href="#事件和错误">事件和错误</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="随机性"><a class="header" href="#随机性">随机性</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="特权调用和origin"><a class="header" href="#特权调用和origin">特权调用和Origin</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="远程过程调用"><a class="header" href="#远程过程调用">远程过程调用</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="应用开发"><a class="header" href="#应用开发">应用开发</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="链条规格"><a class="header" href="#链条规格">链条规格</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="创世纪配置"><a class="header" href="#创世纪配置">创世纪配置</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="构建过程"><a class="header" href="#构建过程">构建过程</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="构建确定性运行时"><a class="header" href="#构建确定性运行时">构建确定性运行时</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="对您的代码进行故障排除"><a class="header" href="#对您的代码进行故障排除">对您的代码进行故障排除</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="测试"><a class="header" href="#测试">❌测试</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="单元测试"><a class="header" href="#单元测试">单元测试</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="调试"><a class="header" href="#调试">调试</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="基准"><a class="header" href="#基准">基准</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="在测试网络中模拟平行链"><a class="header" href="#在测试网络中模拟平行链">在测试网络中模拟平行链</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="检查运行时间"><a class="header" href="#检查运行时间">检查运行时间</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="部署"><a class="header" href="#部署">🪤部署</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="准备部署"><a class="header" href="#准备部署">准备部署</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="部署选项和工具"><a class="header" href="#部署选项和工具">部署选项和工具</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="密钥签名和网络操作"><a class="header" href="#密钥签名和网络操作">密钥签名和网络操作</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="维护"><a class="header" href="#维护">⚠️维护</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="监视器"><a class="header" href="#监视器">监视器</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="运行时升级"><a class="header" href="#运行时升级">运行时升级</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="教程"><a class="header" href="#教程">💾教程</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="构建区块链"><a class="header" href="#构建区块链">构建区块链</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="构建应用程序逻辑"><a class="header" href="#构建应用程序逻辑">构建应用程序逻辑</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="构建平行链"><a class="header" href="#构建平行链">构建平行链</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="参考"><a class="header" href="#参考">参考</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-api"><a class="header" href="#rust-api">Rust API</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="词汇表"><a class="header" href="#词汇表">词汇表</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="命令行工具"><a class="header" href="#命令行工具">命令行工具</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="运行时-api"><a class="header" href="#运行时-api">运行时 API</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="框架托盘"><a class="header" href="#框架托盘">框架托盘</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="框架宏"><a class="header" href="#框架宏">框架宏</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="帐户数据结构"><a class="header" href="#帐户数据结构">帐户数据结构</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="类型编码-scale"><a class="header" href="#类型编码-scale">类型编码 (SCALE)</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="地址格式"><a class="header" href="#地址格式">地址格式</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="交易格式"><a class="header" href="#交易格式">交易格式</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="xcm参考"><a class="header" href="#xcm参考">XCM参考</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="操作方法快速参考指南"><a class="header" href="#操作方法快速参考指南">操作方法快速参考指南</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="社区"><a class="header" href="#社区">🏠社区</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="内容风格指南"><a class="header" href="#内容风格指南">内容风格指南</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="贡献者指南"><a class="header" href="#贡献者指南">贡献者指南</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="模板---操作指南"><a class="header" href="#模板---操作指南">模板 - 操作指南</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
